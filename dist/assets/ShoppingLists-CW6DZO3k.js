import{u as S,z as u,j as t,C as d,D as f,E as N}from"./index-Cwbd59cA.js";import{u as A,r as p}from"./vendor-react-BGoNz5Fc.js";import{b as D,A as b,P as r,S as x,z as v,d as y}from"./vendor-ui-Bqs3IicT.js";import"./vendor-supabase-fHMDFEO1.js";function k(){const s=A(),{user:e}=S(),[l,h]=p.useState(!0),[i,g]=p.useState([]);p.useEffect(()=>{e&&c()},[e]);async function c(){try{const a=await u(e.id);g(a)}catch(a){console.error(a)}finally{h(!1)}}async function m(){if(e)try{const a=await f(e.id);s(`/shopping/list/${a.id}`)}catch(a){console.error(a)}}async function L(a,n){if(a.stopPropagation(),!!confirm("确定删除此清单?"))try{await N(n),c()}catch(o){console.error(o)}}return l?t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]","data-matrix-id":"src/pages/ShoppingLists.tsx:53:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"53","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20min-h-%5B60vh%5D%22%7D",children:t.jsx(D,{className:"w-8 h-8 text-primary-500 animate-spin","data-matrix-id":"src/pages/ShoppingLists.tsx:54:8","data-matrix-name":"Loader2","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"54","data-component-file":"ShoppingLists.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-primary-500%20animate-spin%22%7D"})}):t.jsxs("div",{className:"pb-20","data-matrix-id":"src/pages/ShoppingLists.tsx:60:4","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"60","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22pb-20%22%7D",children:[t.jsxs("div",{className:"sticky top-0 bg-white z-10 px-4 py-3 flex items-center gap-3 border-b border-neutral-100","data-matrix-id":"src/pages/ShoppingLists.tsx:62:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"62","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22sticky%20top-0%20bg-white%20z-10%20px-4%20py-3%20flex%20items-center%20gap-3%20border-b%20border-neutral-100%22%7D",children:[t.jsx("button",{onClick:()=>s(-1),className:"p-2 -ml-2","data-matrix-id":"src/pages/ShoppingLists.tsx:63:8","data-matrix-name":"button","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"63","data-component-file":"ShoppingLists.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20-ml-2%22%7D",children:t.jsx(b,{className:"w-5 h-5 text-neutral-600","data-matrix-id":"src/pages/ShoppingLists.tsx:64:10","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"64","data-component-file":"ShoppingLists.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-600%22%7D"})}),t.jsx("h1",{className:"text-heading-md text-neutral-900 flex-1","data-matrix-id":"src/pages/ShoppingLists.tsx:66:8","data-matrix-name":"h1","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"66","data-component-file":"ShoppingLists.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%20flex-1%22%7D",children:"购物清单"}),t.jsx("button",{onClick:m,className:"w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center","data-matrix-id":"src/pages/ShoppingLists.tsx:67:8","data-matrix-name":"button","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"67","data-component-file":"ShoppingLists.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-10%20h-10%20bg-primary-500%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:t.jsx(r,{className:"w-5 h-5 text-white","data-matrix-id":"src/pages/ShoppingLists.tsx:71:10","data-matrix-name":"Plus","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"71","data-component-file":"ShoppingLists.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-white%22%7D"})})]}),t.jsx("div",{className:"px-4 py-3 space-y-3","data-matrix-id":"src/pages/ShoppingLists.tsx:76:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"76","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20space-y-3%22%7D",children:i.length===0?t.jsxs(d,{variant:"elevated",className:"text-center py-12","data-matrix-id":"src/pages/ShoppingLists.tsx:78:10","data-matrix-name":"Card","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"78","data-component-file":"ShoppingLists.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22className%22%3A%22text-center%20py-12%22%7D",children:[t.jsx(x,{className:"w-16 h-16 text-neutral-300 mx-auto mb-4","data-matrix-id":"src/pages/ShoppingLists.tsx:79:12","data-matrix-name":"ShoppingCart","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"79","data-component-file":"ShoppingLists.tsx","data-component-name":"ShoppingCart","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-neutral-300%20mx-auto%20mb-4%22%7D"}),t.jsx("p",{className:"text-body-sm text-neutral-500 mb-4","data-matrix-id":"src/pages/ShoppingLists.tsx:80:12","data-matrix-name":"p","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"80","data-component-file":"ShoppingLists.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%20mb-4%22%7D",children:"还没有购物清单"}),t.jsxs("button",{onClick:m,className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-500 text-white rounded-xl","data-matrix-id":"src/pages/ShoppingLists.tsx:81:12","data-matrix-name":"button","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"81","data-component-file":"ShoppingLists.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22inline-flex%20items-center%20gap-2%20px-6%20py-3%20bg-primary-500%20text-white%20rounded-xl%22%7D",children:[t.jsx(r,{className:"w-5 h-5","data-matrix-id":"src/pages/ShoppingLists.tsx:85:14","data-matrix-name":"Plus","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"85","data-component-file":"ShoppingLists.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"创建清单"]})]}):i.map(a=>{var n;return t.jsx(d,{variant:"elevated",onClick:()=>s(`/shopping/list/${a.id}`),"data-matrix-id":"src/pages/ShoppingLists.tsx:91:12","data-matrix-name":"Card","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"91","data-component-file":"ShoppingLists.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:t.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/pages/ShoppingLists.tsx:96:14","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"96","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${a.status==="completed"?"bg-semantic-success/10":a.status==="shopping"?"bg-primary-100":"bg-neutral-100"}`,"data-matrix-id":"src/pages/ShoppingLists.tsx:97:16","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"97","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:t.jsx(x,{className:`w-6 h-6 ${a.status==="completed"?"text-semantic-success":a.status==="shopping"?"text-primary-500":"text-neutral-500"}`,"data-matrix-id":"src/pages/ShoppingLists.tsx:102:18","data-matrix-name":"ShoppingCart","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"102","data-component-file":"ShoppingLists.tsx","data-component-name":"ShoppingCart","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"})}),t.jsxs("div",{className:"flex-1","data-matrix-id":"src/pages/ShoppingLists.tsx:108:16","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"108","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[t.jsx("h3",{className:"text-heading-sm text-neutral-900","data-matrix-id":"src/pages/ShoppingLists.tsx:109:18","data-matrix-name":"h3","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"109","data-component-file":"ShoppingLists.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-heading-sm%20text-neutral-900%22%7D",children:a.name}),t.jsxs("p",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/ShoppingLists.tsx:110:18","data-matrix-name":"p","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"110","data-component-file":"ShoppingLists.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:[((n=a.items)==null?void 0:n.length)||0,"件商品",a.estimated_total&&` - ¥${a.estimated_total.toFixed(2)}`]}),t.jsx("p",{className:"text-caption text-neutral-400","data-matrix-id":"src/pages/ShoppingLists.tsx:114:18","data-matrix-name":"p","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"114","data-component-file":"ShoppingLists.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-400%22%7D",children:new Date(a.created_at).toLocaleDateString("zh-CN")})]}),t.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/pages/ShoppingLists.tsx:118:16","data-matrix-name":"div","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"118","data-component-file":"ShoppingLists.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx("span",{className:`px-2 py-1 rounded-full text-caption ${a.status==="completed"?"bg-semantic-success/10 text-semantic-success":a.status==="shopping"?"bg-primary-100 text-primary-600":"bg-neutral-100 text-neutral-600"}`,"data-matrix-id":"src/pages/ShoppingLists.tsx:119:18","data-matrix-name":"span","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"119","data-component-file":"ShoppingLists.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:a.status==="completed"?"已完成":a.status==="shopping"?"采购中":"待采购"}),t.jsx("button",{onClick:o=>L(o,a.id),className:"p-2 text-neutral-400 hover:text-semantic-error","data-matrix-id":"src/pages/ShoppingLists.tsx:126:18","data-matrix-name":"button","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"126","data-component-file":"ShoppingLists.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20text-neutral-400%20hover%3Atext-semantic-error%22%7D",children:t.jsx(v,{className:"w-4 h-4","data-matrix-id":"src/pages/ShoppingLists.tsx:130:20","data-matrix-name":"Trash2","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"130","data-component-file":"ShoppingLists.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})}),t.jsx(y,{className:"w-5 h-5 text-neutral-400","data-matrix-id":"src/pages/ShoppingLists.tsx:132:18","data-matrix-name":"ChevronRight","data-component-path":"src/pages/ShoppingLists.tsx","data-component-line":"132","data-component-file":"ShoppingLists.tsx","data-component-name":"ChevronRight","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-400%22%7D"})]})]})},a.id)})})]})}export{k as default};
