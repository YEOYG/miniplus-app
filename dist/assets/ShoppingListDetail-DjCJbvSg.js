import{u as R,F as K,j as t,C as D,G as U,H as l,I as G,E as H}from"./index-Cwbd59cA.js";import{h as J,u as O,r as s}from"./vendor-react-BGoNz5Fc.js";import{b as A,A as Q,z as y,S as V,y as W,_ as Y,P as Z,$ as w}from"./vendor-ui-Bqs3IicT.js";import"./vendor-supabase-fHMDFEO1.js";function ot(){var v;const{id:r}=J(),u=O(),{user:tt}=R(),[B,j]=s.useState(!0),[n,C]=s.useState(null),[k,x]=s.useState(!1),[E,S]=s.useState(!1),[L,_]=s.useState(null),[o,f]=s.useState(null),[at,b]=s.useState(""),[N,h]=s.useState([]),[i,c]=s.useState({name:"",quantity:1,unit:"份",checked:!1});s.useEffect(()=>{r&&m()},[r]);async function m(){try{const{data:a,error:e}=await K.from("shopping_lists").select("*").eq("id",r).maybeSingle();if(e)throw e;C({...a,items:(a==null?void 0:a.items)||[]})}catch(a){console.error(a)}finally{j(!1)}}async function F(a){if(b(a),c({...i,name:a}),a.length>=1){const e=await U(a).catch(()=>[]);h(e)}else h([])}function T(a){c({...i,name:a.name,unit:a.unit||"份",sku_id:a.id,estimated_price:a.average_price}),b(""),h([])}async function I(){if(!n||!i.name)return;const a={name:i.name,quantity:i.quantity||1,unit:i.unit||"份",estimated_price:i.estimated_price,sku_id:i.sku_id,checked:!1},e=[...n.items,a],g=e.reduce((d,p)=>d+(p.estimated_price||0)*p.quantity,0);await l(n.id,{items:e,estimated_total:g}),x(!1),c({name:"",quantity:1,unit:"份",checked:!1}),m()}async function q(a){if(!n)return;const e=[...n.items];e[a].checked=!e[a].checked,await l(n.id,{items:e}),m()}async function P(a){if(!n)return;const e=n.items.filter((d,p)=>p!==a),g=e.reduce((d,p)=>d+(p.estimated_price||0)*p.quantity,0);await l(n.id,{items:e,estimated_total:g}),m()}async function z(a){if(!a.sku_id)return;_(a),S(!0);const e=await G(a.sku_id).catch(()=>null);f(e)}async function M(){!n||!confirm("确定删除此购物清单?")||(await H(n.id),u("/shopping"))}async function $(a){n&&(await l(n.id,{status:a}),m())}if(B)return t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]","data-matrix-id":"src/pages/ShoppingListDetail.tsx:134:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"134","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20min-h-%5B60vh%5D%22%7D",children:t.jsx(A,{className:"w-8 h-8 text-primary-500 animate-spin","data-matrix-id":"src/pages/ShoppingListDetail.tsx:135:8","data-matrix-name":"Loader2","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"135","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-primary-500%20animate-spin%22%7D"})});if(!n)return t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]","data-matrix-id":"src/pages/ShoppingListDetail.tsx:142:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"142","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20min-h-%5B60vh%5D%22%7D",children:t.jsx("p",{className:"text-neutral-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:143:8","data-matrix-name":"p","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"143","data-component-file":"ShoppingListDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-500%22%7D",children:"清单不存在"})});const X=n.items.filter(a=>a.checked).length;return t.jsxs("div",{className:"pb-32","data-matrix-id":"src/pages/ShoppingListDetail.tsx:151:4","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"151","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22pb-32%22%7D",children:[t.jsxs("div",{className:"sticky top-0 bg-white z-10 px-4 py-3 flex items-center gap-3 border-b border-neutral-100","data-matrix-id":"src/pages/ShoppingListDetail.tsx:153:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"153","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22sticky%20top-0%20bg-white%20z-10%20px-4%20py-3%20flex%20items-center%20gap-3%20border-b%20border-neutral-100%22%7D",children:[t.jsx("button",{onClick:()=>u(-1),className:"p-2 -ml-2","data-matrix-id":"src/pages/ShoppingListDetail.tsx:154:8","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"154","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20-ml-2%22%7D",children:t.jsx(Q,{className:"w-5 h-5 text-neutral-600","data-matrix-id":"src/pages/ShoppingListDetail.tsx:155:10","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"155","data-component-file":"ShoppingListDetail.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-600%22%7D"})}),t.jsxs("div",{className:"flex-1","data-matrix-id":"src/pages/ShoppingListDetail.tsx:157:8","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"157","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[t.jsx("h1",{className:"text-heading-md text-neutral-900","data-matrix-id":"src/pages/ShoppingListDetail.tsx:158:10","data-matrix-name":"h1","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"158","data-component-file":"ShoppingListDetail.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%22%7D",children:n.name}),t.jsxs("p",{className:"text-caption text-neutral-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:159:10","data-matrix-name":"p","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"159","data-component-file":"ShoppingListDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-500%22%7D",children:[X,"/",n.items.length," 已勾选"]})]}),t.jsx("button",{onClick:M,className:"p-2 text-neutral-400","data-matrix-id":"src/pages/ShoppingListDetail.tsx:161:8","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"161","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-2%20text-neutral-400%22%7D",children:t.jsx(y,{className:"w-5 h-5","data-matrix-id":"src/pages/ShoppingListDetail.tsx:162:10","data-matrix-name":"Trash2","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"162","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]}),t.jsx("div",{className:"px-4 py-3 flex gap-2","data-matrix-id":"src/pages/ShoppingListDetail.tsx:167:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"167","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20flex%20gap-2%22%7D",children:["pending","shopping","completed"].map(a=>t.jsx("button",{onClick:()=>$(a),className:`px-4 py-2 rounded-full text-body-sm transition-colors ${n.status===a?"bg-primary-500 text-white":"bg-neutral-100 text-neutral-600"}`,"data-matrix-id":"src/pages/ShoppingListDetail.tsx:169:10","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"169","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:a==="pending"?"待采购":a==="shopping"?"采购中":"已完成"},a))}),t.jsx("div",{className:"px-4 space-y-2","data-matrix-id":"src/pages/ShoppingListDetail.tsx:184:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"184","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20space-y-2%22%7D",children:n.items.length===0?t.jsxs(D,{variant:"elevated",className:"text-center py-8","data-matrix-id":"src/pages/ShoppingListDetail.tsx:186:10","data-matrix-name":"Card","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"186","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22className%22%3A%22text-center%20py-8%22%7D",children:[t.jsx(V,{className:"w-12 h-12 text-neutral-300 mx-auto mb-3","data-matrix-id":"src/pages/ShoppingListDetail.tsx:187:12","data-matrix-name":"ShoppingCart","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"187","data-component-file":"ShoppingListDetail.tsx","data-component-name":"ShoppingCart","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-neutral-300%20mx-auto%20mb-3%22%7D"}),t.jsx("p",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:188:12","data-matrix-name":"p","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"188","data-component-file":"ShoppingListDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:"清单是空的，添加一些商品吧"})]}):n.items.map((a,e)=>t.jsx(D,{variant:"elevated","data-matrix-id":"src/pages/ShoppingListDetail.tsx:192:12","data-matrix-name":"Card","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"192","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%7D",children:t.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/pages/ShoppingListDetail.tsx:193:14","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"193","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[t.jsx("button",{onClick:()=>q(e),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${a.checked?"bg-primary-500 border-primary-500":"border-neutral-300"}`,"data-matrix-id":"src/pages/ShoppingListDetail.tsx:194:16","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"194","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:a.checked&&t.jsx(W,{className:"w-4 h-4 text-white","data-matrix-id":"src/pages/ShoppingListDetail.tsx:202:35","data-matrix-name":"Check","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"202","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Check","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-white%22%7D"})}),t.jsxs("div",{className:`flex-1 ${a.checked?"opacity-50":""}`,"data-matrix-id":"src/pages/ShoppingListDetail.tsx:204:16","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"204","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[t.jsx("h3",{className:`text-heading-sm text-neutral-900 ${a.checked?"line-through":""}`,"data-matrix-id":"src/pages/ShoppingListDetail.tsx:205:18","data-matrix-name":"h3","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"205","data-component-file":"ShoppingListDetail.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:a.name}),t.jsxs("p",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:208:18","data-matrix-name":"p","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"208","data-component-file":"ShoppingListDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:[a.quantity," ",a.unit,a.estimated_price&&` - ¥${(a.estimated_price*a.quantity).toFixed(2)}`]})]}),a.sku_id&&t.jsx("button",{onClick:()=>z(a),className:"p-2 text-primary-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:214:18","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"214","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20text-primary-500%22%7D",children:t.jsx(Y,{className:"w-5 h-5","data-matrix-id":"src/pages/ShoppingListDetail.tsx:218:20","data-matrix-name":"TrendingDown","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"218","data-component-file":"ShoppingListDetail.tsx","data-component-name":"TrendingDown","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),t.jsx("button",{onClick:()=>P(e),className:"p-2 text-neutral-400","data-matrix-id":"src/pages/ShoppingListDetail.tsx:221:16","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"221","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20text-neutral-400%22%7D",children:t.jsx(y,{className:"w-4 h-4","data-matrix-id":"src/pages/ShoppingListDetail.tsx:225:18","data-matrix-name":"Trash2","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"225","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})})]})},e))}),t.jsxs("div",{className:"fixed bottom-16 left-0 right-0 bg-white border-t border-neutral-100 p-4","data-matrix-id":"src/pages/ShoppingListDetail.tsx:234:6","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"234","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20bottom-16%20left-0%20right-0%20bg-white%20border-t%20border-neutral-100%20p-4%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3","data-matrix-id":"src/pages/ShoppingListDetail.tsx:235:8","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"235","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-3%22%7D",children:[t.jsx("span",{className:"text-body-sm text-neutral-600","data-matrix-id":"src/pages/ShoppingListDetail.tsx:236:10","data-matrix-name":"span","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"236","data-component-file":"ShoppingListDetail.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-600%22%7D",children:"预估总价"}),t.jsxs("span",{className:"text-heading-md text-primary-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:237:10","data-matrix-name":"span","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"237","data-component-file":"ShoppingListDetail.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-primary-500%22%7D",children:["¥",((v=n.estimated_total)==null?void 0:v.toFixed(2))||"0.00"]})]}),t.jsxs("button",{onClick:()=>x(!0),className:"w-full bg-primary-500 text-white py-3 rounded-xl flex items-center justify-center gap-2","data-matrix-id":"src/pages/ShoppingListDetail.tsx:241:8","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"241","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-primary-500%20text-white%20py-3%20rounded-xl%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[t.jsx(Z,{className:"w-5 h-5","data-matrix-id":"src/pages/ShoppingListDetail.tsx:245:10","data-matrix-name":"Plus","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"245","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"添加商品"]})]}),k&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end","data-matrix-id":"src/pages/ShoppingListDetail.tsx:252:8","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"252","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F50%20z-50%20flex%20items-end%22%7D",children:t.jsxs("div",{className:"w-full bg-white rounded-t-3xl p-6","data-matrix-id":"src/pages/ShoppingListDetail.tsx:253:10","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"253","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20bg-white%20rounded-t-3xl%20p-6%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6","data-matrix-id":"src/pages/ShoppingListDetail.tsx:254:12","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"254","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-6%22%7D",children:[t.jsx("h2",{className:"text-heading-md text-neutral-900","data-matrix-id":"src/pages/ShoppingListDetail.tsx:255:14","data-matrix-name":"h2","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"255","data-component-file":"ShoppingListDetail.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%22%7D",children:"添加商品"}),t.jsx("button",{onClick:()=>x(!1),"data-matrix-id":"src/pages/ShoppingListDetail.tsx:256:14","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"256","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:t.jsx(w,{className:"w-6 h-6 text-neutral-400","data-matrix-id":"src/pages/ShoppingListDetail.tsx:257:16","data-matrix-name":"X","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"257","data-component-file":"ShoppingListDetail.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-neutral-400%22%7D"})})]}),t.jsxs("div",{className:"space-y-4","data-matrix-id":"src/pages/ShoppingListDetail.tsx:261:12","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"261","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[t.jsxs("div",{className:"relative","data-matrix-id":"src/pages/ShoppingListDetail.tsx:262:14","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"262","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[t.jsx("input",{type:"text",value:i.name,onChange:a=>F(a.target.value),placeholder:"搜索或输入商品名称",className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:outline-none focus:border-primary-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:263:16","data-matrix-name":"input","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"263","data-component-file":"ShoppingListDetail.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22%E6%90%9C%E7%B4%A2%E6%88%96%E8%BE%93%E5%85%A5%E5%95%86%E5%93%81%E5%90%8D%E7%A7%B0%22%2C%22className%22%3A%22w-full%20px-4%20py-3%20border%20border-neutral-200%20rounded-xl%20focus%3Aoutline-none%20focus%3Aborder-primary-500%22%7D"}),N.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-neutral-200 rounded-xl shadow-lg max-h-48 overflow-y-auto","data-matrix-id":"src/pages/ShoppingListDetail.tsx:271:18","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"271","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20z-10%20w-full%20mt-1%20bg-white%20border%20border-neutral-200%20rounded-xl%20shadow-lg%20max-h-48%20overflow-y-auto%22%7D",children:N.map(a=>t.jsxs("button",{onClick:()=>T(a),className:"w-full px-4 py-3 text-left hover:bg-neutral-50 flex items-center justify-between","data-matrix-id":"src/pages/ShoppingListDetail.tsx:273:22","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"273","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-3%20text-left%20hover%3Abg-neutral-50%20flex%20items-center%20justify-between%22%7D",children:[t.jsx("span",{"data-matrix-id":"src/pages/ShoppingListDetail.tsx:278:24","data-matrix-name":"span","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"278","data-component-file":"ShoppingListDetail.tsx","data-component-name":"span",children:a.name}),t.jsxs("span",{className:"text-caption text-neutral-400","data-matrix-id":"src/pages/ShoppingListDetail.tsx:279:24","data-matrix-name":"span","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"279","data-component-file":"ShoppingListDetail.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-400%22%7D",children:["¥",a.average_price]})]},a.id))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3","data-matrix-id":"src/pages/ShoppingListDetail.tsx:286:14","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"286","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-2%20gap-3%22%7D",children:[t.jsxs("div",{"data-matrix-id":"src/pages/ShoppingListDetail.tsx:287:16","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"287","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-body-sm text-neutral-600 mb-1","data-matrix-id":"src/pages/ShoppingListDetail.tsx:288:18","data-matrix-name":"label","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"288","data-component-file":"ShoppingListDetail.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-body-sm%20text-neutral-600%20mb-1%22%7D",children:"数量"}),t.jsx("input",{type:"number",value:i.quantity,onChange:a=>c({...i,quantity:Number(a.target.value)}),min:1,className:"w-full px-4 py-3 border border-neutral-200 rounded-xl","data-matrix-id":"src/pages/ShoppingListDetail.tsx:289:18","data-matrix-name":"input","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"289","data-component-file":"ShoppingListDetail.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22number%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22min%22%3A1%2C%22className%22%3A%22w-full%20px-4%20py-3%20border%20border-neutral-200%20rounded-xl%22%7D"})]}),t.jsxs("div",{"data-matrix-id":"src/pages/ShoppingListDetail.tsx:297:16","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"297","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-body-sm text-neutral-600 mb-1","data-matrix-id":"src/pages/ShoppingListDetail.tsx:298:18","data-matrix-name":"label","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"298","data-component-file":"ShoppingListDetail.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-body-sm%20text-neutral-600%20mb-1%22%7D",children:"单位"}),t.jsx("input",{type:"text",value:i.unit,onChange:a=>c({...i,unit:a.target.value}),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl","data-matrix-id":"src/pages/ShoppingListDetail.tsx:299:18","data-matrix-name":"input","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"299","data-component-file":"ShoppingListDetail.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-3%20border%20border-neutral-200%20rounded-xl%22%7D"})]})]}),t.jsx("button",{onClick:I,disabled:!i.name,className:"w-full bg-primary-500 text-white py-4 rounded-xl text-heading-sm disabled:opacity-50","data-matrix-id":"src/pages/ShoppingListDetail.tsx:308:14","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"308","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BUnaryExpression%5D%22%2C%22className%22%3A%22w-full%20bg-primary-500%20text-white%20py-4%20rounded-xl%20text-heading-sm%20disabled%3Aopacity-50%22%7D",children:"添加"})]})]})}),E&&L&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end","data-matrix-id":"src/pages/ShoppingListDetail.tsx:322:8","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"322","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F50%20z-50%20flex%20items-end%22%7D",children:t.jsxs("div",{className:"w-full bg-white rounded-t-3xl p-6 max-h-[70vh] overflow-y-auto","data-matrix-id":"src/pages/ShoppingListDetail.tsx:323:10","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"323","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20bg-white%20rounded-t-3xl%20p-6%20max-h-%5B70vh%5D%20overflow-y-auto%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6","data-matrix-id":"src/pages/ShoppingListDetail.tsx:324:12","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"324","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-6%22%7D",children:[t.jsxs("h2",{className:"text-heading-md text-neutral-900","data-matrix-id":"src/pages/ShoppingListDetail.tsx:325:14","data-matrix-name":"h2","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"325","data-component-file":"ShoppingListDetail.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%22%7D",children:[L.name," 比价"]}),t.jsx("button",{onClick:()=>{S(!1),f(null)},"data-matrix-id":"src/pages/ShoppingListDetail.tsx:326:14","data-matrix-name":"button","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"326","data-component-file":"ShoppingListDetail.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:t.jsx(w,{className:"w-6 h-6 text-neutral-400","data-matrix-id":"src/pages/ShoppingListDetail.tsx:327:16","data-matrix-name":"X","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"327","data-component-file":"ShoppingListDetail.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-neutral-400%22%7D"})})]}),o?t.jsxs("div",{className:"space-y-3","data-matrix-id":"src/pages/ShoppingListDetail.tsx:336:14","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"336","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:[o.prices.map((a,e)=>t.jsx(D,{variant:"elevated",className:a.platform===o.best_deal.platform?"border-2 border-primary-500":"","data-matrix-id":"src/pages/ShoppingListDetail.tsx:338:18","data-matrix-name":"Card","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"338","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22className%22%3A%22%5BConditionalExpression%5D%22%7D",children:t.jsxs("div",{className:"flex items-center justify-between","data-matrix-id":"src/pages/ShoppingListDetail.tsx:343:20","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"343","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%22%7D",children:[t.jsxs("div",{"data-matrix-id":"src/pages/ShoppingListDetail.tsx:344:22","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"344","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div",children:[t.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/pages/ShoppingListDetail.tsx:345:24","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"345","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx("h3",{className:"text-heading-sm text-neutral-900","data-matrix-id":"src/pages/ShoppingListDetail.tsx:346:26","data-matrix-name":"h3","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"346","data-component-file":"ShoppingListDetail.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-heading-sm%20text-neutral-900%22%7D",children:a.platform}),a.platform===o.best_deal.platform&&t.jsx("span",{className:"px-2 py-0.5 bg-primary-500 text-white text-caption rounded","data-matrix-id":"src/pages/ShoppingListDetail.tsx:348:28","data-matrix-name":"span","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"348","data-component-file":"ShoppingListDetail.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-2%20py-0.5%20bg-primary-500%20text-white%20text-caption%20rounded%22%7D",children:"最优"})]}),a.discount_info&&t.jsx("p",{className:"text-caption text-semantic-error","data-matrix-id":"src/pages/ShoppingListDetail.tsx:352:26","data-matrix-name":"p","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"352","data-component-file":"ShoppingListDetail.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-semantic-error%22%7D",children:a.discount_info})]}),t.jsxs("div",{className:"text-right","data-matrix-id":"src/pages/ShoppingListDetail.tsx:355:22","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"355","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-right%22%7D",children:[t.jsxs("div",{className:"text-heading-md text-primary-500","data-matrix-id":"src/pages/ShoppingListDetail.tsx:356:24","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"356","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-primary-500%22%7D",children:["¥",a.price.toFixed(2)]}),a.original_price&&a.original_price>a.price&&t.jsxs("div",{className:"text-caption text-neutral-400 line-through","data-matrix-id":"src/pages/ShoppingListDetail.tsx:358:26","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"358","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-400%20line-through%22%7D",children:["¥",a.original_price.toFixed(2)]})]})]})},e)),o.best_deal.savings>0&&t.jsxs("div",{className:"text-center text-body-sm text-semantic-success mt-4","data-matrix-id":"src/pages/ShoppingListDetail.tsx:368:18","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"368","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20text-body-sm%20text-semantic-success%20mt-4%22%7D",children:["选择 ",o.best_deal.platform," 可节省 ¥",o.best_deal.savings.toFixed(2)]})]}):t.jsx("div",{className:"flex items-center justify-center py-8","data-matrix-id":"src/pages/ShoppingListDetail.tsx:332:14","data-matrix-name":"div","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"332","data-component-file":"ShoppingListDetail.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20py-8%22%7D",children:t.jsx(A,{className:"w-8 h-8 text-primary-500 animate-spin","data-matrix-id":"src/pages/ShoppingListDetail.tsx:333:16","data-matrix-name":"Loader2","data-component-path":"src/pages/ShoppingListDetail.tsx","data-component-line":"333","data-component-file":"ShoppingListDetail.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-primary-500%20animate-spin%22%7D"})})]})})]})}export{ot as default};
