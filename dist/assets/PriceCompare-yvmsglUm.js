import{N as y,O as b,j as a,C as i}from"./index-Cwbd59cA.js";import{u as A,r as o}from"./vendor-react-BGoNz5Fc.js";import{A as D,i as B,b as j,_ as w,a1 as S}from"./vendor-ui-Bqs3IicT.js";import"./vendor-supabase-fHMDFEO1.js";const L=["全部","蔬菜","肉类","海鲜","蛋类","乳制品","豆制品","薯类"];function k(){const d=A(),[x,m]=o.useState(!0),[l,C]=o.useState([]),[g,u]=o.useState([]),[c,P]=o.useState("全部"),[r,h]=o.useState("");o.useEffect(()=>{f()},[c]);async function f(){m(!0);try{const e=await y(c==="全部"?void 0:c);if(C(e||[]),e&&e.length>0){const s=await b(e.map(n=>n.id));u(s)}}catch(t){console.error(t)}finally{m(!1)}}const p=l.filter(t=>!r||t.name.toLowerCase().includes(r.toLowerCase())),v=t=>g.find(e=>e.sku.id===t);return a.jsxs("div",{className:"pb-20","data-matrix-id":"src/pages/PriceCompare.tsx:49:4","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"49","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22pb-20%22%7D",children:[a.jsxs("div",{className:"sticky top-0 bg-white z-10 px-4 py-3 flex items-center gap-3 border-b border-neutral-100","data-matrix-id":"src/pages/PriceCompare.tsx:51:6","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"51","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22sticky%20top-0%20bg-white%20z-10%20px-4%20py-3%20flex%20items-center%20gap-3%20border-b%20border-neutral-100%22%7D",children:[a.jsx("button",{onClick:()=>d(-1),className:"p-2 -ml-2","data-matrix-id":"src/pages/PriceCompare.tsx:52:8","data-matrix-name":"button","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"52","data-component-file":"PriceCompare.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20-ml-2%22%7D",children:a.jsx(D,{className:"w-5 h-5 text-neutral-600","data-matrix-id":"src/pages/PriceCompare.tsx:53:10","data-matrix-name":"ArrowLeft","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"53","data-component-file":"PriceCompare.tsx","data-component-name":"ArrowLeft","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-600%22%7D"})}),a.jsx("h1",{className:"text-heading-md text-neutral-900","data-matrix-id":"src/pages/PriceCompare.tsx:55:8","data-matrix-name":"h1","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"55","data-component-file":"PriceCompare.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%22%7D",children:"智能比价"})]}),a.jsx("div",{className:"px-4 py-3","data-matrix-id":"src/pages/PriceCompare.tsx:59:6","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"59","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%22%7D",children:a.jsxs("div",{className:"relative","data-matrix-id":"src/pages/PriceCompare.tsx:60:8","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"60","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[a.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400","data-matrix-id":"src/pages/PriceCompare.tsx:61:10","data-matrix-name":"Search","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"61","data-component-file":"PriceCompare.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-5%20h-5%20text-neutral-400%22%7D"}),a.jsx("input",{type:"text",value:r,onChange:t=>h(t.target.value),placeholder:"搜索食材...",className:"w-full pl-10 pr-4 py-3 bg-neutral-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500","data-matrix-id":"src/pages/PriceCompare.tsx:62:10","data-matrix-name":"input","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"62","data-component-file":"PriceCompare.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22%E6%90%9C%E7%B4%A2%E9%A3%9F%E6%9D%90...%22%2C%22className%22%3A%22w-full%20pl-10%20pr-4%20py-3%20bg-neutral-100%20rounded-xl%20focus%3Aoutline-none%20focus%3Aring-2%20focus%3Aring-primary-500%22%7D"})]})}),a.jsx("div",{className:"px-4 py-2 overflow-x-auto","data-matrix-id":"src/pages/PriceCompare.tsx:73:6","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"73","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-2%20overflow-x-auto%22%7D",children:a.jsx("div",{className:"flex gap-2","data-matrix-id":"src/pages/PriceCompare.tsx:74:8","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"74","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:L.map(t=>a.jsx("button",{onClick:()=>P(t),className:`px-4 py-2 rounded-full whitespace-nowrap text-body-sm transition-colors ${c===t?"bg-primary-500 text-white":"bg-neutral-100 text-neutral-600"}`,"data-matrix-id":"src/pages/PriceCompare.tsx:76:12","data-matrix-name":"button","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"76","data-component-file":"PriceCompare.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:t},t))})}),a.jsx("div",{className:"px-4 py-3 space-y-3","data-matrix-id":"src/pages/PriceCompare.tsx:92:6","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"92","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20space-y-3%22%7D",children:x?a.jsx("div",{className:"flex items-center justify-center py-12","data-matrix-id":"src/pages/PriceCompare.tsx:94:10","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"94","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20py-12%22%7D",children:a.jsx(j,{className:"w-8 h-8 text-primary-500 animate-spin","data-matrix-id":"src/pages/PriceCompare.tsx:95:12","data-matrix-name":"Loader2","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"95","data-component-file":"PriceCompare.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-primary-500%20animate-spin%22%7D"})}):p.length===0?a.jsxs(i,{variant:"elevated",className:"text-center py-8","data-matrix-id":"src/pages/PriceCompare.tsx:98:10","data-matrix-name":"Card","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"98","data-component-file":"PriceCompare.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22className%22%3A%22text-center%20py-8%22%7D",children:[a.jsx(w,{className:"w-12 h-12 text-neutral-300 mx-auto mb-3","data-matrix-id":"src/pages/PriceCompare.tsx:99:12","data-matrix-name":"TrendingDown","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"99","data-component-file":"PriceCompare.tsx","data-component-name":"TrendingDown","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-neutral-300%20mx-auto%20mb-3%22%7D"}),a.jsx("p",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/PriceCompare.tsx:100:12","data-matrix-name":"p","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"100","data-component-file":"PriceCompare.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:"没有找到相关食材"})]}):p.map(t=>{var s;const e=v(t.id);return a.jsx(i,{variant:"elevated","data-matrix-id":"src/pages/PriceCompare.tsx:107:14","data-matrix-name":"Card","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"107","data-component-file":"PriceCompare.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%7D",children:a.jsxs("div",{className:"flex items-start gap-3","data-matrix-id":"src/pages/PriceCompare.tsx:108:16","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"108","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20gap-3%22%7D",children:[a.jsx("div",{className:"w-16 h-16 bg-neutral-100 rounded-xl flex items-center justify-center","data-matrix-id":"src/pages/PriceCompare.tsx:109:18","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"109","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20bg-neutral-100%20rounded-xl%20flex%20items-center%20justify-center%22%7D",children:a.jsx(S,{className:"w-8 h-8 text-neutral-400","data-matrix-id":"src/pages/PriceCompare.tsx:110:20","data-matrix-name":"Tag","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"110","data-component-file":"PriceCompare.tsx","data-component-name":"Tag","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-neutral-400%22%7D"})}),a.jsxs("div",{className:"flex-1","data-matrix-id":"src/pages/PriceCompare.tsx:112:18","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"112","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1","data-matrix-id":"src/pages/PriceCompare.tsx:113:20","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"113","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-1%22%7D",children:[a.jsx("h3",{className:"text-heading-sm text-neutral-900","data-matrix-id":"src/pages/PriceCompare.tsx:114:22","data-matrix-name":"h3","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"114","data-component-file":"PriceCompare.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-heading-sm%20text-neutral-900%22%7D",children:t.name}),(e==null?void 0:e.best_deal)&&a.jsxs("span",{className:"px-2 py-1 bg-semantic-success/10 text-semantic-success text-caption rounded","data-matrix-id":"src/pages/PriceCompare.tsx:116:24","data-matrix-name":"span","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"116","data-component-file":"PriceCompare.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-2%20py-1%20bg-semantic-success%2F10%20text-semantic-success%20text-caption%20rounded%22%7D",children:[e.best_deal.platform," 最优"]})]}),a.jsx("p",{className:"text-caption text-neutral-500 mb-2","data-matrix-id":"src/pages/PriceCompare.tsx:121:20","data-matrix-name":"p","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"121","data-component-file":"PriceCompare.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-500%20mb-2%22%7D",children:t.specification}),e?a.jsx("div",{className:"flex flex-wrap gap-2","data-matrix-id":"src/pages/PriceCompare.tsx:125:22","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"125","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20gap-2%22%7D",children:e.prices.slice(0,3).map((n,N)=>a.jsxs("div",{className:`px-3 py-1.5 rounded-lg ${n.platform===e.best_deal.platform?"bg-primary-50 border border-primary-200":"bg-neutral-50"}`,"data-matrix-id":"src/pages/PriceCompare.tsx:127:26","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"127","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[a.jsx("div",{className:"text-caption text-neutral-500","data-matrix-id":"src/pages/PriceCompare.tsx:135:28","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"135","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-500%22%7D",children:n.platform}),a.jsxs("div",{className:`text-body-sm font-medium ${n.platform===e.best_deal.platform?"text-primary-600":"text-neutral-700"}`,"data-matrix-id":"src/pages/PriceCompare.tsx:136:28","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"136","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:["¥",n.price.toFixed(2)]})]},N))}):a.jsxs("div",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/PriceCompare.tsx:147:22","data-matrix-name":"div","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"147","data-component-file":"PriceCompare.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:["参考价: ¥",((s=t.average_price)==null?void 0:s.toFixed(2))||"-"]}),(e==null?void 0:e.best_deal.savings)&&e.best_deal.savings>0&&a.jsxs("p",{className:"text-caption text-semantic-success mt-2","data-matrix-id":"src/pages/PriceCompare.tsx:153:22","data-matrix-name":"p","data-component-path":"src/pages/PriceCompare.tsx","data-component-line":"153","data-component-file":"PriceCompare.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-semantic-success%20mt-2%22%7D",children:["选择最优平台可节省 ¥",e.best_deal.savings.toFixed(2)]})]})]})},t.id)})})]})}export{k as default};
