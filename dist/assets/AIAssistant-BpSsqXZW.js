import{u as g,j as t,a as f}from"./index-Cwbd59cA.js";import{r as n}from"./vendor-react-BGoNz5Fc.js";import{e as I,f as b,M as v,k as y}from"./vendor-ui-Bqs3IicT.js";import"./vendor-supabase-fHMDFEO1.js";const w=["今天吃什么？","低脂晚餐推荐","增肌食谱","快手早餐","家庭聚餐菜单"];function C(){const{profile:A}=g(),[r,o]=n.useState([{id:"1",role:"assistant",content:"您好！我是MiniPlus营养助手。我可以根据您的健康目标推荐食谱、分析食物营养、制定饮食计划。有什么可以帮您的？",timestamp:new Date}]),[e,i]=n.useState(""),[d,p]=n.useState(!1),l=n.useRef(null);n.useEffect(()=>{var a;(a=l.current)==null||a.scrollIntoView({behavior:"smooth"})},[r]);const x=async()=>{if(!e.trim()||d)return;const a={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};o(s=>[...s,a]);const h=e;i(""),p(!0);try{const s=await f(h,A||void 0),m={id:(Date.now()+1).toString(),role:"assistant",content:s.message||"抱歉，我暂时无法回答您的问题，请稍后再试。",timestamp:new Date};o(c=>[...c,m])}catch(s){console.error("AI请求失败:",s);const m={id:(Date.now()+1).toString(),role:"assistant",content:"抱歉，服务暂时不可用，请稍后再试。",timestamp:new Date};o(c=>[...c,m])}finally{p(!1)}},u=a=>{i(a)};return t.jsxs("div",{className:"flex flex-col h-[calc(100vh-56px)]","data-matrix-id":"src/pages/AIAssistant.tsx:85:4","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"85","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-col%20h-%5Bcalc(100vh-56px)%5D%22%7D",children:[t.jsx("div",{className:"px-4 py-3 bg-white border-b border-neutral-100","data-matrix-id":"src/pages/AIAssistant.tsx:87:6","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"87","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20bg-white%20border-b%20border-neutral-100%22%7D",children:t.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/pages/AIAssistant.tsx:88:8","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"88","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[t.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center","data-matrix-id":"src/pages/AIAssistant.tsx:89:10","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"89","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-primary-500%20rounded-xl%20flex%20items-center%20justify-center%22%7D",children:t.jsx(I,{className:"w-5 h-5 text-white","data-matrix-id":"src/pages/AIAssistant.tsx:90:12","data-matrix-name":"Sparkles","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"90","data-component-file":"AIAssistant.tsx","data-component-name":"Sparkles","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-white%22%7D"})}),t.jsxs("div",{"data-matrix-id":"src/pages/AIAssistant.tsx:92:10","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"92","data-component-file":"AIAssistant.tsx","data-component-name":"div",children:[t.jsx("h1",{className:"text-heading-sm text-neutral-900","data-matrix-id":"src/pages/AIAssistant.tsx:93:12","data-matrix-name":"h1","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"93","data-component-file":"AIAssistant.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-heading-sm%20text-neutral-900%22%7D",children:"AI营养助手"}),t.jsx("p",{className:"text-caption text-neutral-500","data-matrix-id":"src/pages/AIAssistant.tsx:94:12","data-matrix-name":"p","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"94","data-component-file":"AIAssistant.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-500%22%7D",children:"智能饮食建议"})]})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-4 bg-neutral-50","data-matrix-id":"src/pages/AIAssistant.tsx:100:6","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"100","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20px-4%20py-4%20space-y-4%20bg-neutral-50%22%7D",children:[r.map(a=>t.jsx("div",{className:`flex ${a.role==="user"?"justify-end":"justify-start"}`,"data-matrix-id":"src/pages/AIAssistant.tsx:102:10","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"102","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:t.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 ${a.role==="user"?"bg-primary-500 text-white rounded-br-md":"bg-white shadow-sm rounded-bl-md"}`,"data-matrix-id":"src/pages/AIAssistant.tsx:106:12","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"106","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[t.jsx("p",{className:"text-body-md whitespace-pre-wrap","data-matrix-id":"src/pages/AIAssistant.tsx:113:14","data-matrix-name":"p","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"113","data-component-file":"AIAssistant.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-md%20whitespace-pre-wrap%22%7D",children:a.content}),t.jsx("p",{className:`text-caption mt-1 ${a.role==="user"?"text-white/70":"text-neutral-400"}`,"data-matrix-id":"src/pages/AIAssistant.tsx:114:14","data-matrix-name":"p","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"114","data-component-file":"AIAssistant.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:a.timestamp.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})})]})},a.id)),d&&t.jsx("div",{className:"flex justify-start","data-matrix-id":"src/pages/AIAssistant.tsx:122:10","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"122","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-start%22%7D",children:t.jsx("div",{className:"bg-white shadow-sm rounded-2xl rounded-bl-md px-4 py-3","data-matrix-id":"src/pages/AIAssistant.tsx:123:12","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"123","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20shadow-sm%20rounded-2xl%20rounded-bl-md%20px-4%20py-3%22%7D",children:t.jsxs("div",{className:"flex gap-1","data-matrix-id":"src/pages/AIAssistant.tsx:124:14","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"124","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-1%22%7D",children:[t.jsx("span",{className:"w-2 h-2 bg-neutral-400 rounded-full animate-bounce",style:{animationDelay:"0ms"},"data-matrix-id":"src/pages/AIAssistant.tsx:125:16","data-matrix-name":"span","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"125","data-component-file":"AIAssistant.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22w-2%20h-2%20bg-neutral-400%20rounded-full%20animate-bounce%22%2C%22style%22%3A%7B%22animationDelay%22%3A%220ms%22%7D%7D"}),t.jsx("span",{className:"w-2 h-2 bg-neutral-400 rounded-full animate-bounce",style:{animationDelay:"150ms"},"data-matrix-id":"src/pages/AIAssistant.tsx:126:16","data-matrix-name":"span","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"126","data-component-file":"AIAssistant.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22w-2%20h-2%20bg-neutral-400%20rounded-full%20animate-bounce%22%2C%22style%22%3A%7B%22animationDelay%22%3A%22150ms%22%7D%7D"}),t.jsx("span",{className:"w-2 h-2 bg-neutral-400 rounded-full animate-bounce",style:{animationDelay:"300ms"},"data-matrix-id":"src/pages/AIAssistant.tsx:127:16","data-matrix-name":"span","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"127","data-component-file":"AIAssistant.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22w-2%20h-2%20bg-neutral-400%20rounded-full%20animate-bounce%22%2C%22style%22%3A%7B%22animationDelay%22%3A%22300ms%22%7D%7D"})]})})}),t.jsx("div",{ref:l,"data-matrix-id":"src/pages/AIAssistant.tsx:133:8","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"133","data-component-file":"AIAssistant.tsx","data-component-name":"div"})]}),t.jsx("div",{className:"px-4 py-2 bg-white border-t border-neutral-100 overflow-x-auto no-scrollbar","data-matrix-id":"src/pages/AIAssistant.tsx:137:6","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"137","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-2%20bg-white%20border-t%20border-neutral-100%20overflow-x-auto%20no-scrollbar%22%7D",children:t.jsx("div",{className:"flex gap-2","data-matrix-id":"src/pages/AIAssistant.tsx:138:8","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"138","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:w.map(a=>t.jsx("button",{onClick:()=>u(a),className:`px-3 py-2 bg-primary-50 text-primary-700 rounded-full text-body-sm whitespace-nowrap
                hover:bg-primary-100 transition-colors`,"data-matrix-id":"src/pages/AIAssistant.tsx:140:12","data-matrix-name":"button","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"140","data-component-file":"AIAssistant.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-3%20py-2%20bg-primary-50%20text-primary-700%20rounded-full%20text-body-sm%20whitespace-nowrap%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hover%3Abg-primary-100%20transition-colors%22%7D",children:a},a))})}),t.jsx("div",{className:"px-4 py-3 bg-white border-t border-neutral-100","data-matrix-id":"src/pages/AIAssistant.tsx:153:6","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"153","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20bg-white%20border-t%20border-neutral-100%22%7D",children:t.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/pages/AIAssistant.tsx:154:8","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"154","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx("button",{className:"w-10 h-10 bg-neutral-100 rounded-full flex items-center justify-center text-neutral-500 hover:bg-neutral-200","data-matrix-id":"src/pages/AIAssistant.tsx:155:10","data-matrix-name":"button","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"155","data-component-file":"AIAssistant.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-neutral-100%20rounded-full%20flex%20items-center%20justify-center%20text-neutral-500%20hover%3Abg-neutral-200%22%7D",children:t.jsx(b,{className:"w-5 h-5","data-matrix-id":"src/pages/AIAssistant.tsx:156:12","data-matrix-name":"Camera","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"156","data-component-file":"AIAssistant.tsx","data-component-name":"Camera","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),t.jsx("button",{className:"w-10 h-10 bg-neutral-100 rounded-full flex items-center justify-center text-neutral-500 hover:bg-neutral-200","data-matrix-id":"src/pages/AIAssistant.tsx:158:10","data-matrix-name":"button","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"158","data-component-file":"AIAssistant.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-neutral-100%20rounded-full%20flex%20items-center%20justify-center%20text-neutral-500%20hover%3Abg-neutral-200%22%7D",children:t.jsx(v,{className:"w-5 h-5","data-matrix-id":"src/pages/AIAssistant.tsx:159:12","data-matrix-name":"Mic","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"159","data-component-file":"AIAssistant.tsx","data-component-name":"Mic","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),t.jsx("div",{className:"flex-1 relative","data-matrix-id":"src/pages/AIAssistant.tsx:161:10","data-matrix-name":"div","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"161","data-component-file":"AIAssistant.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20relative%22%7D",children:t.jsx("input",{type:"text",value:e,onChange:a=>i(a.target.value),onKeyPress:a=>a.key==="Enter"&&x(),placeholder:"输入您的问题...",className:`w-full h-10 px-4 bg-neutral-50 rounded-full border border-neutral-100 
                focus:border-primary-500 outline-none text-body-md`,"data-matrix-id":"src/pages/AIAssistant.tsx:162:12","data-matrix-name":"input","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"162","data-component-file":"AIAssistant.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onKeyPress%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22%E8%BE%93%E5%85%A5%E6%82%A8%E7%9A%84%E9%97%AE%E9%A2%98...%22%2C%22className%22%3A%22w-full%20h-10%20px-4%20bg-neutral-50%20rounded-full%20border%20border-neutral-100%20%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20focus%3Aborder-primary-500%20outline-none%20text-body-md%22%7D"})}),t.jsx("button",{onClick:x,disabled:!e.trim()||d,className:`w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center text-white
              disabled:bg-neutral-300 hover:bg-primary-700 transition-colors`,"data-matrix-id":"src/pages/AIAssistant.tsx:172:10","data-matrix-name":"button","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"172","data-component-file":"AIAssistant.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22w-10%20h-10%20bg-primary-500%20rounded-full%20flex%20items-center%20justify-center%20text-white%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20disabled%3Abg-neutral-300%20hover%3Abg-primary-700%20transition-colors%22%7D",children:t.jsx(y,{className:"w-5 h-5","data-matrix-id":"src/pages/AIAssistant.tsx:178:12","data-matrix-name":"Send","data-component-path":"src/pages/AIAssistant.tsx","data-component-line":"178","data-component-file":"AIAssistant.tsx","data-component-name":"Send","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]})})]})}export{C as default};
