import{u as N,j as a,C as l}from"./index-Cwbd59cA.js";import{r as p}from"./vendor-react-BGoNz5Fc.js";import{R as y,n as A,p as w,q as C,H as j,r as D,s as B,t as k,u as E,v as _,a as M,d as x,w as R}from"./vendor-ui-Bqs3IicT.js";import"./vendor-supabase-fHMDFEO1.js";function O(){var m,d,c,r;const{profile:t,signOut:g,updateProfile:u}=N(),[h,s]=p.useState(!1),[e,i]=p.useState({height:((m=t==null?void 0:t.height)==null?void 0:m.toString())||"",weight:((d=t==null?void 0:t.weight)==null?void 0:d.toString())||"",targetWeight:((c=t==null?void 0:t.target_weight)==null?void 0:c.toString())||"",dailyCalorieGoal:((t==null?void 0:t.daily_calorie_goal)||2e3).toString()}),b=async()=>{await u({height:Number(e.height),weight:Number(e.weight),target_weight:Number(e.targetWeight),daily_calorie_goal:Number(e.dailyCalorieGoal)}),s(!1)},S=[{title:"健康档案",items:[{icon:y,label:"身高体重",value:t!=null&&t.height?`${t.height}cm / ${t.weight}kg`:"未设置",action:()=>s(!0)},{icon:A,label:"目标体重",value:t!=null&&t.target_weight?`${t.target_weight}kg`:"未设置",action:()=>s(!0)},{icon:w,label:"每日热量目标",value:`${(t==null?void 0:t.daily_calorie_goal)||2e3} kcal`,action:()=>s(!0)}]},{title:"饮食偏好",items:[{icon:C,label:"过敏原设置",value:(r=t==null?void 0:t.allergies)!=null&&r.length?`${t.allergies.length}项`:"未设置"},{icon:j,label:"口味偏好",value:"清淡"}]},{title:"应用设置",items:[{icon:D,label:"通知提醒",value:"已开启"},{icon:B,label:"深色模式",value:"跟随系统"},{icon:k,label:"隐私设置",value:""}]},{title:"更多",items:[{icon:E,label:"数据导出",value:""},{icon:_,label:"帮助与反馈",value:""}]}];return a.jsxs("div",{className:"px-4 pt-4 pb-8 space-y-4","data-matrix-id":"src/pages/Settings.tsx:64:4","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"64","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20pt-4%20pb-8%20space-y-4%22%7D",children:[a.jsxs(l,{variant:"elevated",className:"flex items-center gap-4","data-matrix-id":"src/pages/Settings.tsx:66:6","data-matrix-name":"Card","data-component-path":"src/pages/Settings.tsx","data-component-line":"66","data-component-file":"Settings.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:[a.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center","data-matrix-id":"src/pages/Settings.tsx:67:8","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"67","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20bg-primary-100%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:t!=null&&t.avatar_url?a.jsx("img",{src:t.avatar_url,alt:"",className:"w-full h-full rounded-full object-cover","data-matrix-id":"src/pages/Settings.tsx:69:12","data-matrix-name":"img","data-component-path":"src/pages/Settings.tsx","data-component-line":"69","data-component-file":"Settings.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%22%2C%22className%22%3A%22w-full%20h-full%20rounded-full%20object-cover%22%7D"}):a.jsx(M,{className:"w-8 h-8 text-primary-500","data-matrix-id":"src/pages/Settings.tsx:71:12","data-matrix-name":"User","data-component-path":"src/pages/Settings.tsx","data-component-line":"71","data-component-file":"Settings.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-primary-500%22%7D"})}),a.jsxs("div",{className:"flex-1","data-matrix-id":"src/pages/Settings.tsx:74:8","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"74","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[a.jsx("h2",{className:"text-heading-md text-neutral-900","data-matrix-id":"src/pages/Settings.tsx:75:10","data-matrix-name":"h2","data-component-path":"src/pages/Settings.tsx","data-component-line":"75","data-component-file":"Settings.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%22%7D",children:(t==null?void 0:t.nickname)||"用户"}),a.jsx("p",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/Settings.tsx:76:10","data-matrix-name":"p","data-component-path":"src/pages/Settings.tsx","data-component-line":"76","data-component-file":"Settings.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:t==null?void 0:t.email}),a.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-primary-50 text-primary-700 text-caption rounded-full","data-matrix-id":"src/pages/Settings.tsx:77:10","data-matrix-name":"span","data-component-path":"src/pages/Settings.tsx","data-component-line":"77","data-component-file":"Settings.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22inline-block%20mt-1%20px-2%20py-0.5%20bg-primary-50%20text-primary-700%20text-caption%20rounded-full%22%7D",children:(t==null?void 0:t.role)==="admin"?"家庭管理员":(t==null?void 0:t.role)==="member"?"家庭成员":"个人用户"})]}),a.jsx(x,{className:"w-5 h-5 text-neutral-400","data-matrix-id":"src/pages/Settings.tsx:81:8","data-matrix-name":"ChevronRight","data-component-path":"src/pages/Settings.tsx","data-component-line":"81","data-component-file":"Settings.tsx","data-component-name":"ChevronRight","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-400%22%7D"})]}),S.map((n,f)=>a.jsxs("div",{"data-matrix-id":"src/pages/Settings.tsx:86:8","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"86","data-component-file":"Settings.tsx","data-component-name":"div",children:[a.jsx("h3",{className:"text-body-sm text-neutral-500 mb-2 px-1","data-matrix-id":"src/pages/Settings.tsx:87:10","data-matrix-name":"h3","data-component-path":"src/pages/Settings.tsx","data-component-line":"87","data-component-file":"Settings.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%20mb-2%20px-1%22%7D",children:n.title}),a.jsx(l,{variant:"elevated",className:"p-0 divide-y divide-neutral-100","data-matrix-id":"src/pages/Settings.tsx:88:10","data-matrix-name":"Card","data-component-path":"src/pages/Settings.tsx","data-component-line":"88","data-component-file":"Settings.tsx","data-component-name":"Card","data-component-content":"%7B%22variant%22%3A%22elevated%22%2C%22className%22%3A%22p-0%20divide-y%20divide-neutral-100%22%7D",children:n.items.map((o,v)=>a.jsxs("button",{onClick:o.action,className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-neutral-50 transition-colors","data-matrix-id":"src/pages/Settings.tsx:90:14","data-matrix-name":"button","data-component-path":"src/pages/Settings.tsx","data-component-line":"90","data-component-file":"Settings.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22w-full%20flex%20items-center%20gap-3%20px-4%20py-3%20hover%3Abg-neutral-50%20transition-colors%22%7D",children:[a.jsx(o.icon,{className:"w-5 h-5 text-neutral-500"}),a.jsx("span",{className:"flex-1 text-left text-body-md text-neutral-800","data-matrix-id":"src/pages/Settings.tsx:96:16","data-matrix-name":"span","data-component-path":"src/pages/Settings.tsx","data-component-line":"96","data-component-file":"Settings.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22flex-1%20text-left%20text-body-md%20text-neutral-800%22%7D",children:o.label}),o.value&&a.jsx("span",{className:"text-body-sm text-neutral-500","data-matrix-id":"src/pages/Settings.tsx:97:31","data-matrix-name":"span","data-component-path":"src/pages/Settings.tsx","data-component-line":"97","data-component-file":"Settings.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-body-sm%20text-neutral-500%22%7D",children:o.value}),a.jsx(x,{className:"w-4 h-4 text-neutral-400","data-matrix-id":"src/pages/Settings.tsx:98:16","data-matrix-name":"ChevronRight","data-component-path":"src/pages/Settings.tsx","data-component-line":"98","data-component-file":"Settings.tsx","data-component-name":"ChevronRight","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-neutral-400%22%7D"})]},v))})]},f)),a.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-2 py-3 text-semantic-error hover:bg-semantic-error/5 rounded-xl transition-colors","data-matrix-id":"src/pages/Settings.tsx:106:6","data-matrix-name":"button","data-component-path":"src/pages/Settings.tsx","data-component-line":"106","data-component-file":"Settings.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20flex%20items-center%20justify-center%20gap-2%20py-3%20text-semantic-error%20hover%3Abg-semantic-error%2F5%20rounded-xl%20transition-colors%22%7D",children:[a.jsx(R,{className:"w-5 h-5","data-matrix-id":"src/pages/Settings.tsx:110:8","data-matrix-name":"LogOut","data-component-path":"src/pages/Settings.tsx","data-component-line":"110","data-component-file":"Settings.tsx","data-component-name":"LogOut","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),a.jsx("span",{className:"text-body-md font-medium","data-matrix-id":"src/pages/Settings.tsx:111:8","data-matrix-name":"span","data-component-path":"src/pages/Settings.tsx","data-component-line":"111","data-component-file":"Settings.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-body-md%20font-medium%22%7D",children:"退出登录"})]}),a.jsx("p",{className:"text-center text-caption text-neutral-400","data-matrix-id":"src/pages/Settings.tsx:115:6","data-matrix-name":"p","data-component-path":"src/pages/Settings.tsx","data-component-line":"115","data-component-file":"Settings.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-center%20text-caption%20text-neutral-400%22%7D",children:"MiniPlus v1.0.0"}),h&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center","data-matrix-id":"src/pages/Settings.tsx:121:8","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"121","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F50%20z-50%20flex%20items-end%20justify-center%22%7D",children:a.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-3xl p-6","data-matrix-id":"src/pages/Settings.tsx:122:10","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"122","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20w-full%20max-w-lg%20rounded-t-3xl%20p-6%22%7D",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6","data-matrix-id":"src/pages/Settings.tsx:123:12","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"123","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-6%22%7D",children:[a.jsx("h3",{className:"text-heading-md text-neutral-900","data-matrix-id":"src/pages/Settings.tsx:124:14","data-matrix-name":"h3","data-component-path":"src/pages/Settings.tsx","data-component-line":"124","data-component-file":"Settings.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-heading-md%20text-neutral-900%22%7D",children:"健康档案"}),a.jsx("button",{onClick:()=>s(!1),className:"text-neutral-400","data-matrix-id":"src/pages/Settings.tsx:125:14","data-matrix-name":"button","data-component-path":"src/pages/Settings.tsx","data-component-line":"125","data-component-file":"Settings.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22text-neutral-400%22%7D",children:"取消"})]}),a.jsxs("div",{className:"space-y-4","data-matrix-id":"src/pages/Settings.tsx:130:12","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"130","data-component-file":"Settings.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[a.jsxs("div",{"data-matrix-id":"src/pages/Settings.tsx:131:14","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"131","data-component-file":"Settings.tsx","data-component-name":"div",children:[a.jsx("label",{className:"block text-body-sm text-neutral-600 mb-1","data-matrix-id":"src/pages/Settings.tsx:132:16","data-matrix-name":"label","data-component-path":"src/pages/Settings.tsx","data-component-line":"132","data-component-file":"Settings.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-body-sm%20text-neutral-600%20mb-1%22%7D",children:"身高 (cm)"}),a.jsx("input",{type:"number",value:e.height,onChange:n=>i({...e,height:n.target.value}),className:"w-full h-12 px-4 rounded-lg border border-neutral-200 focus:border-primary-500 outline-none",placeholder:"170","data-matrix-id":"src/pages/Settings.tsx:133:16","data-matrix-name":"input","data-component-path":"src/pages/Settings.tsx","data-component-line":"133","data-component-file":"Settings.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22number%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20h-12%20px-4%20rounded-lg%20border%20border-neutral-200%20focus%3Aborder-primary-500%20outline-none%22%2C%22placeholder%22%3A%22170%22%7D"})]}),a.jsxs("div",{"data-matrix-id":"src/pages/Settings.tsx:141:14","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"141","data-component-file":"Settings.tsx","data-component-name":"div",children:[a.jsx("label",{className:"block text-body-sm text-neutral-600 mb-1","data-matrix-id":"src/pages/Settings.tsx:142:16","data-matrix-name":"label","data-component-path":"src/pages/Settings.tsx","data-component-line":"142","data-component-file":"Settings.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-body-sm%20text-neutral-600%20mb-1%22%7D",children:"体重 (kg)"}),a.jsx("input",{type:"number",value:e.weight,onChange:n=>i({...e,weight:n.target.value}),className:"w-full h-12 px-4 rounded-lg border border-neutral-200 focus:border-primary-500 outline-none",placeholder:"65","data-matrix-id":"src/pages/Settings.tsx:143:16","data-matrix-name":"input","data-component-path":"src/pages/Settings.tsx","data-component-line":"143","data-component-file":"Settings.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22number%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20h-12%20px-4%20rounded-lg%20border%20border-neutral-200%20focus%3Aborder-primary-500%20outline-none%22%2C%22placeholder%22%3A%2265%22%7D"})]}),a.jsxs("div",{"data-matrix-id":"src/pages/Settings.tsx:151:14","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"151","data-component-file":"Settings.tsx","data-component-name":"div",children:[a.jsx("label",{className:"block text-body-sm text-neutral-600 mb-1","data-matrix-id":"src/pages/Settings.tsx:152:16","data-matrix-name":"label","data-component-path":"src/pages/Settings.tsx","data-component-line":"152","data-component-file":"Settings.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-body-sm%20text-neutral-600%20mb-1%22%7D",children:"目标体重 (kg)"}),a.jsx("input",{type:"number",value:e.targetWeight,onChange:n=>i({...e,targetWeight:n.target.value}),className:"w-full h-12 px-4 rounded-lg border border-neutral-200 focus:border-primary-500 outline-none",placeholder:"60","data-matrix-id":"src/pages/Settings.tsx:153:16","data-matrix-name":"input","data-component-path":"src/pages/Settings.tsx","data-component-line":"153","data-component-file":"Settings.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22number%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20h-12%20px-4%20rounded-lg%20border%20border-neutral-200%20focus%3Aborder-primary-500%20outline-none%22%2C%22placeholder%22%3A%2260%22%7D"})]}),a.jsxs("div",{"data-matrix-id":"src/pages/Settings.tsx:161:14","data-matrix-name":"div","data-component-path":"src/pages/Settings.tsx","data-component-line":"161","data-component-file":"Settings.tsx","data-component-name":"div",children:[a.jsx("label",{className:"block text-body-sm text-neutral-600 mb-1","data-matrix-id":"src/pages/Settings.tsx:162:16","data-matrix-name":"label","data-component-path":"src/pages/Settings.tsx","data-component-line":"162","data-component-file":"Settings.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-body-sm%20text-neutral-600%20mb-1%22%7D",children:"每日热量目标 (kcal)"}),a.jsx("input",{type:"number",value:e.dailyCalorieGoal,onChange:n=>i({...e,dailyCalorieGoal:n.target.value}),className:"w-full h-12 px-4 rounded-lg border border-neutral-200 focus:border-primary-500 outline-none",placeholder:"2000","data-matrix-id":"src/pages/Settings.tsx:163:16","data-matrix-name":"input","data-component-path":"src/pages/Settings.tsx","data-component-line":"163","data-component-file":"Settings.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22number%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20h-12%20px-4%20rounded-lg%20border%20border-neutral-200%20focus%3Aborder-primary-500%20outline-none%22%2C%22placeholder%22%3A%222000%22%7D"})]})]}),a.jsx("button",{onClick:b,className:"w-full h-12 bg-primary-500 text-white rounded-full font-semibold mt-6","data-matrix-id":"src/pages/Settings.tsx:173:12","data-matrix-name":"button","data-component-path":"src/pages/Settings.tsx","data-component-line":"173","data-component-file":"Settings.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20h-12%20bg-primary-500%20text-white%20rounded-full%20font-semibold%20mt-6%22%7D",children:"保存"})]})})]})}export{O as default};
